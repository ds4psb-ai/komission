# Komission 아키텍처 컨설팅 요청서

> **작성일**: 2025-12-22
> **요청자**: Komission 개발팀
> **목적**: 4개 주요 섹션의 유기적 연결을 통한 최적의 사용자 경험 설계 자문

---

## 1. 프로젝트 개요

### 1.1 Komission이란?

**Komission**은 바이럴 숏폼 콘텐츠(TikTok, Instagram Reels)의 "성공 DNA"를 분석하고, 크리에이터가 이를 리믹스하여 새로운 바이럴 콘텐츠를 만들 수 있도록 가이드하는 **바이럴 콘텐츠 인텔리전스 플랫폼**입니다.

### 1.2 핵심 비즈니스 모델

```
┌─────────────────────────────────────────────────────────────────┐
│                     Komission Value Chain                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [브랜드/광고주]                                                  │
│       │                                                          │
│       ▼ 캠페인 등록 + 제품 제공                                   │
│  ┌─────────────────────┐                                         │
│  │    O2O 마켓플레이스   │ ◄─── 체험단 신청                        │
│  └─────────────────────┘                                         │
│       │                                                          │
│       ▼ 퀘스트 수락 (인센티브)                                    │
│  ┌─────────────────────┐                                         │
│  │     크리에이터       │                                         │
│  │  (소상공인 사장님)   │                                         │
│  └─────────────────────┘                                         │
│       │                                                          │
│       ▼ 리믹스 촬영 가이드 사용                                   │
│  ┌─────────────────────┐                                         │
│  │   바이럴 콘텐츠 생성  │                                         │
│  └─────────────────────┘                                         │
│       │                                                          │
│       ▼ 조회수/참여율 → 로열티 분배                               │
│  ┌─────────────────────┐                                         │
│  │  원작자 → 리믹서     │                                         │
│  │   (Genealogy 기반)   │                                         │
│  └─────────────────────┘                                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 1.3 타겟 사용자

| 사용자 유형 | 설명 | 핵심 니즈 |
|------------|------|----------|
| **소상공인 사장님** | 기술에 익숙하지 않은 50대+ | "복잡한 건 모르겠고, 터지는 영상 만들고 싶다" |
| **신진 크리에이터** | 팔로워 1,000~10,000 | "검증된 포맷으로 빠르게 성장하고 싶다" |
| **브랜드 마케터** | CPM/CPA 효율 추구 | "진정성 있는 UGC로 광고 효과 극대화" |

---

## 2. 현재 아키텍처

### 2.1 기술 스택

| 분류 | 기술 |
|-----|------|
| **AI** | Gemini 2.0 Pro (비디오 분석), Claude (한국화 기획) |
| **Backend** | Python 3.9, FastAPI, SQLAlchemy, asyncpg |
| **Frontend** | Next.js 16, React 19, TypeScript, TailwindCSS 4 |
| **Database** | PostgreSQL (PostGIS, pgvector), Neo4j (Genealogy Graph), Redis |
| **Auth** | Google OAuth → Firebase → JWT |

### 2.2 데이터 모델 핵심

```
┌──────────────────────────────────────────────────┐
│                    RemixNode                      │
├──────────────────────────────────────────────────┤
│ - node_id: UUID (Primary Key)                    │
│ - title: 제목                                    │
│ - source_video_url: 원본 영상 URL                │
│ - platform: tiktok | instagram | youtube         │
│ - layer: master | fork | fork_of_fork            │
│ - parent_node_id: 부모 노드 (Fork 관계)          │
│ - genealogy_depth: 계보 깊이 (0 = 원본)          │
│ - performance_delta: 원본 대비 성장률 (+127%)    │
│ - gemini_analysis: AI 분석 결과 (JSON)           │
│ - view_count, like_count, share_count            │
└──────────────────────────────────────────────────┘
         │
         │ parent_node_id
         ▼
┌──────────────────────────────────────────────────┐
│              Viral Genealogy Graph (Neo4j)       │
├──────────────────────────────────────────────────┤
│ (Master) ──[:FORKED_FROM]──> (Fork A)            │
│                               │                   │
│                               ▼                   │
│                         (Fork of Fork B)          │
│                                                   │
│ 관계 속성: timestamp, mutation_type,             │
│           performance_delta, royalty_share       │
└──────────────────────────────────────────────────┘
```

### 2.3 AI 분석 파이프라인

```
[URL 입력] → [Gemini 비디오 분석] → [씬 분할 + BPM 추출]
                                         │
                                         ▼
                               [미장센 가이드 생성]
                               - 카메라 앵글
                               - 조명 설정
                               - 연기 디렉션
                                         │
                                         ▼
                               [촬영 가이드 제공]
                               - Ghost Overlay
                               - Beat Timer
                               - Audio Sync Slider
```

---

## 3. 4개 주요 섹션 현황

### 3.1 아웃라이어 섹션 (`/`)

**목적**: 터질 가능성이 높은 바이럴 콘텐츠 발견

**현재 구현**:
- Magic Input: URL 입력 시 즉시 분석 시작 (복잡한 파이프라인 숨김)
- 9:16 세로 카드 그리드: 스크롤 리빌 + 3D 틸트 효과
- Viral Badge: 성장률 (`+127%`) 표시
- Ranking Badge: 상위 3개 노드에 순위 표시

**데이터**:
- `GET /api/v1/remix/` → 인기순/최신순 노드 목록
- `performance_delta`, `view_count` 기반 정렬

### 3.2 캔버스 섹션 (`/canvas`)

**목적**: Pro 사용자를 위한 노드 기반 파이프라인 편집

**현재 구현**:
- ReactFlow 기반 노드 에디터
- Source → Process → Output 파이프라인
- Outlier Selector: 기존 노드를 소스로 선택
- Governance Lock: Master 노드에 🔒 잠금 (삭제 불가)
- Undo/Redo: 작업 취소/복원

**데이터**:
- 노드 생성: `POST /api/v1/remix/`
- AI 분석: `POST /api/v1/remix/{id}/analyze`

### 3.3 O2O 마켓 섹션 (`/o2o`)

**목적**: 오프라인 체험단 캠페인 마켓플레이스

**현재 구현**:
- 캠페인 카드 목록 (제품/서비스 체험단)
- 지도 기반 위치 표시 (PostGIS)
- 신청하기 버튼

**데이터**:
- `GET /api/v1/o2o/campaigns` → 캠페인 목록
- `POST /api/v1/o2o/campaigns/{id}/apply` → 신청

**개선 필요**:
- 리믹스 상세 페이지에서 "퀘스트 수락" 시 여기로 연결
- 체험단 완료 후 리믹스 업로드 플로우

### 3.4 마이 섹션 (`/my`)

**목적**: 사용자의 리믹스, 로열티 수익, 계보도 관리

**현재 구현**:
- Royalty Dashboard: 총 수익, 정산 대기, K-Points
- Transaction History: 수익 발생 내역
- Genealogy Widget: 내가 만든 노드의 가계도

**데이터**:
- `GET /api/v1/royalty/summary` → 수익 요약
- `GET /api/v1/royalty/history` → 거래 내역

---

## 4. 현재 섹션 간 연결 상태

### 4.1 구현된 연결

```
┌────────────┐     카드 클릭      ┌────────────────┐
│ 아웃라이어  │ ─────────────────> │ 리믹스 상세     │
│   (/)      │                    │ (/remix/[id])  │
└────────────┘                    └────────────────┘
                                         │
                                         │ 촬영 시작 버튼
                                         ▼
                                  ┌────────────────┐
                                  │ 촬영 가이드     │
                                  │ (FilmingGuide) │
                                  └────────────────┘
                                         │
                                         │ Invisible Forking
                                         │ (백그라운드 Fork API 호출)
                                         ▼
                                  ┌────────────────┐
                                  │ 신규 노드 생성  │
                                  │ (attempt 추적) │
                                  └────────────────┘
```

### 4.2 구현된 게이미피케이션

- **퀘스트 수락**: "⚔️ 퀘스트 수락하고 +500P 받기" 버튼
- **보상 뱃지**: 퀘스트 수락 후 촬영 버튼에 "💰 +500P 적용됨" 표시
- **Audio Sync Slider**: 촬영 후 오디오 싱크 조절 (-0.5s ~ +0.5s)

### 4.3 끊어진 연결 (Gap)

| From | To | 현재 상태 | 이상적 플로우 |
|------|----|----------|--------------|
| 리믹스 상세 | O2O 마켓 | 단순 링크 | 퀘스트 수락 시 자동으로 O2O 캠페인과 매칭 |
| 촬영 완료 | 마이페이지 | 없음 | 업로드 완료 → 마이페이지 리다이렉트 + 축하 모달 |
| 마이페이지 | 아웃라이어 | 없음 | "새 리믹스 시작하기" CTA |
| 캔버스 | 리믹스 상세 | 없음 | 노드 클릭 시 상세 페이지로 이동 |

---

## 5. 컨설팅 요청 사항

### 5.1 핵심 질문

> **"4개 섹션(아웃라이어/캔버스/O2O/마이)을 어떻게 유기적으로 연결해야, 기술에 익숙하지 않은 소상공인 사장님도 자연스럽게 수익화까지 도달할 수 있을까요?"**

### 5.2 세부 질문

1. **사용자 플로우 최적화**
   - 현재 "URL 입력 → 분석 → 상세 페이지 → 촬영 → ?" 플로우에서, 촬영 완료 후 어디로 유도해야 하나요?
   - O2O 체험단과 리믹스 촬영을 어떻게 자연스럽게 연결할 수 있나요?

2. **게이미피케이션 전략**
   - "퀘스트 수락" 외에 추가할 수 있는 게이미피케이션 요소는?
   - 사용자 레벨/배지 시스템이 필요한가요?

3. **데이터 활용**
   - Viral Genealogy Graph를 사용자에게 어떻게 시각화하면 "내가 만든 리믹스가 얼마나 퍼졌는지" 직관적으로 보여줄 수 있나요?
   - `performance_delta`(성장률)를 더 효과적으로 활용할 방법은?

4. **기술적 제약 고려**
   - 모바일 웹에서 `MediaRecorder` 오디오 싱크 밀림 문제 (Android)를 UX로 커버할 수 있는 방법은?
   - Ghost Overlay 촬영 시 발열 문제를 최소화하는 설계 패턴은?

5. **수익화 연결**
   - 로열티 분배 알고리즘의 UX 표현 방법 (원작자 vs 리믹서 분배 비율)
   - K-Points → 현금화 플로우 제안

---

## 6. 참고 자료

### 제공되는 문서

1. **README.md** - 프로젝트 전체 개요 및 구조
2. **K-MEME FACTORY v5.2 - Hybrid Intelligence MVP.md** - 상세 아키텍처 및 비즈니스 로직
3. **K-MEME-v5.2-OPERATIONS.md** - 기술 운영 (보안, 캐싱, 모니터링)
4. **K-MEME-v5.2-PRODUCTION-READY.md** - 프로덕션 배포 가이드

### GitHub 레포지토리

- **https://github.com/ds4psb-ai/komission**

### 경쟁사 참고

- **Autoke.ai** - 숏폼 분석 및 가이드 플랫폼 (우리보다 UI가 더 세련됨)
- **CapCut Templates** - 템플릿 기반 리믹스 (우리는 AI 가이드 기반)

---

## 7. 기대 결과물

1. **4개 섹션 연결 다이어그램** (Before/After)
2. **사용자 플로우 개선안** (Figma 수준의 상세 플로우)
3. **게이미피케이션 요소 제안** (구체적인 UI 요소 포함)
4. **데이터 시각화 제안** (Genealogy Graph, Performance Metrics)
5. **기술적 제안** (모바일 웹 제약 사항 우회 방법)

---

## 8. 연락처

- **이메일**: [프로젝트 담당자 이메일]
- **Slack**: [팀 슬랙 채널]
- **GitHub**: https://github.com/ds4psb-ai/komission

---

**문서 버전**: 1.0
**최종 업데이트**: 2025-12-22 23:20 KST
